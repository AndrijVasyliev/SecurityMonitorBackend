{"version":3,"file":"static/js/1461.a5512866.chunk.js","mappings":"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","sources":["loads/viewLoad.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useFormik } from 'formik';\r\n\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport Divider from '@mui/material/Divider';\r\nimport LocalShippingIcon from '@mui/icons-material/LocalShipping';\r\nimport FactoryIcon from '@mui/icons-material/Factory';\r\nimport PersonIcon from '@mui/icons-material/Person';\r\n\r\nimport StopsForm from './stops';\r\n\r\nimport {\r\n  Loader,\r\n  SearchField,\r\n  SearchMultiField,\r\n  SelectMultiField,\r\n  TextField,\r\n  SelectField,\r\n  FileList,\r\n} from '../components';\r\n\r\nimport { CustomersQuery, LoadQuery, TrucksQuery, UsersQuery } from '../api';\r\nimport { useSnackbar } from '../hooks';\r\nimport {\r\n  CreateLoad,\r\n  User,\r\n  Truck,\r\n  TruckTypes,\r\n  LoadStatus,\r\n  LoadStatuses,\r\n  Customer,\r\n  FormOnClose,\r\n} from '../utils/dataTypes';\r\nimport { cleanObject } from '../utils/queryHelpers';\r\n\r\nconst startValues = {\r\n  status: 'Available' as LoadStatus,\r\n  ref: [],\r\n  stops: [],\r\n  weight: undefined,\r\n  truckType: [],\r\n  rate: undefined,\r\n  totalCharges: undefined,\r\n  currency: 'USD',\r\n  bookedByUser: null,\r\n  bookedByCompany: undefined,\r\n  assignTo: [],\r\n  checkInAs: '4ULogistics',\r\n  truck: null,\r\n  bookedWith: null,\r\n};\r\n\r\nexport default function ViewLoadForm({\r\n  id,\r\n  onClose,\r\n}: {\r\n  id: string;\r\n  onClose: FormOnClose;\r\n}) {\r\n  const [initialValues, setInitialValues] =\r\n    React.useState<CreateLoad>(startValues);\r\n  const setSnackbarMessage = useSnackbar();\r\n\r\n  const {\r\n    isLoading: loading,\r\n    isFetching: fetching,\r\n    error,\r\n    data,\r\n  } = useQuery({\r\n    queryKey: ['load', id],\r\n    queryFn: LoadQuery,\r\n    retry: false,\r\n  });\r\n  React.useEffect(() => {\r\n    if (!error) {\r\n      return;\r\n    }\r\n    setSnackbarMessage({\r\n      severity: 'error',\r\n      message: error instanceof Error ? error.message : JSON.stringify(error),\r\n    });\r\n  }, [error]);\r\n\r\n  const formik = useFormik<CreateLoad>({\r\n    initialValues: {\r\n      ...initialValues,\r\n      ...data,\r\n    },\r\n    enableReinitialize: true,\r\n    onSubmit: () => {\r\n      return;\r\n    },\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    setInitialValues({\r\n      ...initialValues,\r\n      ...cleanObject(data, Object.keys(initialValues)),\r\n    });\r\n  }, [data]);\r\n\r\n  const handleClose = () => {\r\n    onClose('Close');\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    onClose('Edit', data);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ height: '100%' }}>\r\n      <form\r\n        onSubmit={formik.handleSubmit}\r\n        onReset={formik.handleReset}\r\n        style={{ height: '100%' }}\r\n      >\r\n        <Box sx={{ p: 3, height: '100%' }}>\r\n          <Divider />\r\n          <Box\r\n            key=\"controls\"\r\n            sx={{\r\n              maxHeight: 'calc(100% - 70px)',\r\n              overflowX: 'hidden',\r\n              overflowY: 'scroll',\r\n            }}\r\n          >\r\n            <Box key=\"topControls\" sx={{ marginBottom: -1, p: 1 }}>\r\n              <SelectField\r\n                fieldName=\"status\"\r\n                label=\"Status\"\r\n                items={LoadStatuses}\r\n                /*disabledItems={LoadStatuses.filter(\r\n                (status) =>\r\n                  status !== 'Available' && status !== 'Not Available',\r\n              )}*/\r\n                disabled\r\n                formik={formik}\r\n              />\r\n              <TextField\r\n                fieldName=\"ref\"\r\n                label=\"REF\"\r\n                multiline\r\n                maxRows={3}\r\n                disabled\r\n                formik={formik}\r\n              />\r\n              <StopsForm fieldName=\"stops\" formik={formik} disabled />\r\n            </Box>\r\n            <Box\r\n              key=\"centerControls\"\r\n              sx={{ display: 'inline-flex', width: '100%' }}\r\n            >\r\n              <Box key=\"left\" sx={{ p: 1, width: '50%' }}>\r\n                <TextField fieldName=\"weight\" label=\"Weight\" formik={formik} />\r\n                <SelectMultiField\r\n                  fieldName=\"truckType\"\r\n                  label=\"Truck Type\"\r\n                  items={TruckTypes}\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n                <SearchField<User>\r\n                  fieldName=\"bookedByUser\"\r\n                  label=\"Booked By\"\r\n                  getSelectedLabel={(selectedItem) =>\r\n                    `${selectedItem.fullName}`\r\n                  }\r\n                  getItemLabel={(item) => `${item.fullName}`}\r\n                  getItemSecondLabel={(item) => `${item.jobTitle}`}\r\n                  ListIcon={PersonIcon}\r\n                  entityType=\"User\"\r\n                  queryFn={UsersQuery}\r\n                  orderby=\"fullName\"\r\n                  order=\"asc\"\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n                <SearchField<Customer>\r\n                  fieldName=\"bookedWith\"\r\n                  label=\"Booked With\"\r\n                  getSelectedLabel={(selectedItem) => `${selectedItem.name}`}\r\n                  getItemLabel={(item) => `${item.name}`}\r\n                  getItemSecondLabel={(item) => `${item.type}`}\r\n                  ListIcon={FactoryIcon}\r\n                  entityType=\"Customer\"\r\n                  queryFn={CustomersQuery}\r\n                  orderby=\"name\"\r\n                  order=\"asc\"\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n                <SearchField<Truck>\r\n                  fieldName=\"truck\"\r\n                  label=\"Truck\"\r\n                  getSelectedLabel={(selectedItem) =>\r\n                    `${selectedItem.truckNumber}`\r\n                  }\r\n                  getItemLabel={(item) => `${item.truckNumber}`}\r\n                  getItemSecondLabel={(item) =>\r\n                    `${item.status}, ${item.licencePlate}`\r\n                  }\r\n                  ListIcon={LocalShippingIcon}\r\n                  entityType=\"Truck\"\r\n                  queryFn={TrucksQuery}\r\n                  orderby=\"truckNumber\"\r\n                  order=\"asc\"\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n              </Box>\r\n              <Box key=\"right\" sx={{ p: 1, width: '50%' }}>\r\n                <TextField\r\n                  fieldName=\"rate\"\r\n                  label=\"Drivers Rate\"\r\n                  placeholder=\"Enter drivers rate\"\r\n                  number\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n                <TextField\r\n                  fieldName=\"totalCharges\"\r\n                  label=\"Total Rate\"\r\n                  placeholder=\"Enter total rate\"\r\n                  number\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n                <TextField\r\n                  fieldName=\"currency\"\r\n                  label=\"Currency\"\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n                <TextField\r\n                  fieldName=\"checkInAs\"\r\n                  label=\"Check In As\"\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n                <TextField\r\n                  fieldName=\"bookedByCompany\"\r\n                  label=\"Booked By Company\"\r\n                  disabled\r\n                  formik={formik}\r\n                />\r\n              </Box>\r\n            </Box>\r\n            <Box\r\n              key=\"bottomControls\"\r\n              sx={{ p: 1, paddingBottom: 0, paddingTop: 0 }}\r\n            >\r\n              <SearchMultiField<User>\r\n                fieldName=\"assignTo\"\r\n                label=\"Assign To\"\r\n                getSelectedLabel={(selectedItem) => `${selectedItem.fullName}`}\r\n                getItemLabel={(item) => `${item.fullName}`}\r\n                getItemSecondLabel={(item) => `${item.jobTitle}`}\r\n                ListIcon={PersonIcon}\r\n                queryFn={UsersQuery}\r\n                orderby=\"fullName\"\r\n                order=\"asc\"\r\n                disabled\r\n                formik={formik}\r\n              />\r\n              <Box key=\"spacerRate\" sx={{ paddingBottom: 2, paddingTop: 2 }} />\r\n              <FileList\r\n                objectId={data?.id}\r\n                objectType=\"Load\"\r\n                label=\"Rate Files\"\r\n                tags={{ [`${data?.id}`]: 'Rate' }}\r\n                disabled\r\n              />\r\n              <Box key=\"spacerBill\" sx={{ paddingBottom: 2, paddingTop: 2 }} />\r\n              <FileList\r\n                objectId={data?.id}\r\n                objectType=\"Load\"\r\n                label=\"Bill Files\"\r\n                tags={{ [`${data?.id}`]: 'Bill' }}\r\n                disabled\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Divider />\r\n          <Box key=\"buttons\" sx={{ paddingTop: 3, display: 'flex' }}>\r\n            <Box key=\"left\" sx={{ p: 1, paddingTop: 0, width: '50%' }}>\r\n              <Button\r\n                fullWidth\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                type=\"button\"\r\n                onClick={handleEdit}\r\n              >\r\n                Edit\r\n              </Button>\r\n            </Box>\r\n            <Box key=\"right\" sx={{ p: 1, paddingTop: 0, width: '50%' }}>\r\n              <Button\r\n                fullWidth\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                type=\"button\"\r\n                onClick={handleClose}\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </form>\r\n      <Loader visible={loading || fetching} />\r\n    </Box>\r\n  );\r\n}\r\n"],"names":["startValues","status","ref","stops","weight","undefined","truckType","rate","totalCharges","currency","bookedByUser","bookedByCompany","assignTo","checkInAs","truck","bookedWith","ViewLoadForm","_ref","id","onClose","initialValues","setInitialValues","React","setSnackbarMessage","useSnackbar","isLoading","loading","isFetching","fetching","error","data","useQuery","queryKey","queryFn","LoadQuery","retry","severity","message","Error","JSON","stringify","formik","useFormik","_objectSpread","enableReinitialize","onSubmit","cleanObject","Object","keys","_jsxs","Box","sx","height","children","_jsx","handleSubmit","onReset","handleReset","style","p","Divider","maxHeight","overflowX","overflowY","marginBottom","SelectField","fieldName","label","items","LoadStatuses","disabled","TextField","multiline","maxRows","StopsForm","display","width","SelectMultiField","TruckTypes","SearchField","getSelectedLabel","selectedItem","concat","fullName","getItemLabel","item","getItemSecondLabel","jobTitle","ListIcon","PersonIcon","entityType","UsersQuery","orderby","order","name","type","FactoryIcon","CustomersQuery","truckNumber","licencePlate","LocalShippingIcon","TrucksQuery","placeholder","number","paddingBottom","paddingTop","SearchMultiField","FileList","objectId","objectType","tags","Button","fullWidth","variant","size","color","onClick","handleEdit","handleClose","Loader","visible"],"sourceRoot":""}