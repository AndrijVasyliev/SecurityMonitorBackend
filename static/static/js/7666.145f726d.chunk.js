"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[7666],{7666:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var r=n(9379),a=n(5043),i=n(3216),s=n(9781),l=n(2836),o=n(5604),c=n(4535),d=n(1546),u=n(7784),h=n(1962),x=n(7739),p=n(39),m=n(3851),A=n(6353),g=n(1081),f=n(5316),j=n(8533),v=n(9347),b=n(1906),w=n(7353),k=n(1806),y=n(3460),C=n(9650),D=n(4882),S=n(9090),N=n(8076),P=n(8093),F=n(5263),T=n(4496),I=n(1596),M=n(1045),O=n(5721),R=n(681),E=n(8968),_=n(6600),z=n(7392),L=n(141),H=n(3560),W=n(3768),q=n(1809),K=n(9397),B=n(2805),J=n(524),Q=n(8612),U=n(1079),G=n(4944),V=n(6431),Y=n(7166);var Z=n(4836),X=n(579);const $=a.forwardRef((function(e,t){return(0,X.jsx)(Z.A,(0,r.A)({direction:"up",ref:t},e))})),ee=[{id:"fullName",orderField:"fullName",getData:e=>({data:"".concat(e.fullName)}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t="".concat((0,V.Pw)(e)," ");let n="";return"Owner"===e.type&&(n="Owner"),"OwnerDriver"===e.type&&(n="Owner/Driver"),{data:(0,X.jsx)("span",{children:(0,X.jsx)("b",{children:t})}),title:n}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t="".concat(e.phone),n="".concat(e.phone2?e.phone2:"");return{data:(0,X.jsxs)("span",{children:[(0,X.jsx)("a",{href:"tel:".concat(t),target:"_blank",onClick:Y.d,children:t}),(0,X.jsx)("br",{}),(0,X.jsx)("a",{href:n?"tel:".concat(n):void 0,target:"_blank",onClick:Y.d,children:n||"\xa0"})]}),title:t+"\n"+n}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{const t="".concat(e.email);return{data:(0,X.jsx)("span",{children:(0,X.jsx)("a",{href:"mailto:".concat(t),target:"_blank",onClick:Y.d,children:t})}),title:t}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{const t="".concat(e.address);return{data:(0,X.jsx)("span",{children:t}),title:t}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"ownTrucks",getData:e=>{if(e.ownTrucks&&e.ownTrucks.length){const t=e.ownTrucks;return{data:(0,X.jsx)("span",{children:t.map(((e,n)=>(0,X.jsx)("a",{href:"/trucks/view/".concat(e.id),target:"_blank",onClick:Y.d,children:"".concat(e.truckNumber).concat(n===t.length-1?"":", ")},n)))}),title:t.map((e=>e.truckNumber)).join(", "),elementsCount:t.length}}return{data:""}},numeric:!1,disablePadding:!0,openInDialog:!0,label:"OWN\xa0TRUCKS"},{id:"driversCoordinators",getData:e=>{if(e.coordinators||e.drivers){var t,n;const r=new Map;null===(t=e.coordinators)||void 0===t||t.forEach((e=>r.set(e.id,{id:e.id,fullName:e.fullName,type:e.type}))),null===(n=e.drivers)||void 0===n||n.forEach((e=>!r.has(e.id)&&r.set(e.id,{id:e.id,fullName:e.fullName,type:e.type})));const a=Array.from(r.values());return{data:(0,X.jsx)("span",{children:a.map(((e,t)=>(0,X.jsx)("a",{href:"./".concat((0,V.Yn)(e),"/view/").concat(e.id),target:"_blank",onClick:Y.d,children:"".concat(e.fullName," ").concat((0,V.Pw)(e)," ").concat(t===a.length-1?"":", ")},e.id)))}),title:a.map((e=>"".concat(e.fullName," ").concat((0,V.Pw)(e)))).join(", "),elementsCount:a.length}}return{data:""}},numeric:!1,disablePadding:!0,openInDialog:!0,label:"Drivers/Coordinators"}],te=(0,c.Ay)(D.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),ne=(0,c.Ay)(p.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function re(e){const{onSelectAllClick:t,order:n,orderBy:r,numSelected:a,rowCount:i,onRequestSort:s}=e;return(0,X.jsx)(te,{children:(0,X.jsxs)(N.A,{children:[(0,X.jsx)(ne,{padding:"checkbox",children:(0,X.jsx)(h.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:a>0&&a<i,checked:i>0&&a===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),ee.map((e=>{return(0,X.jsx)(ne,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:r===e.id&&n,children:(0,X.jsxs)(P.A,{active:e.orderField&&r===e.orderField,hideSortIcon:!e.orderField,direction:r===e.orderField?n:"asc",onClick:e.orderField?(t=e.orderField,e=>{s(e,t)}):()=>{},children:[e.label,e.orderField&&r===e.orderField?(0,X.jsx)(w.A,{component:"span",sx:J.A,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function ae(e){const{selected:t,setQueryParams:n}=e,[o,c]=a.useState(!1),[h,p]=a.useState(""),[f,j]=a.useState(0),[v,b]=a.useState(!1),k=(0,i.zy)(),y=(0,i.Zp)(),C=(0,s.jE)(),D=(0,G.dh)(),{mutate:S,isLoading:N}=(0,l.n)(U.Jx,{onSuccess:()=>{D({severity:"success",message:"Deleted"}),C.invalidateQueries(["owners"])},onError:e=>{D({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),P=()=>{b(!1),p(""),j(0),n({})},I=()=>{b(!1);const e={};h&&(e.fullName=h),f&&(e.truckNumber=f),n(e)},J=e=>{"Enter"===e.key&&(h||f?I():P())};return(0,X.jsxs)(F.A,{sx:(0,r.A)({overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1}},t.length>0&&{bgcolor:e=>(0,d.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}),children:[t.length>0?(0,X.jsxs)(T.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,X.jsx)(T.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Owners"}),(0,X.jsx)(w.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,X.jsx)(u.A,{label:"First name/Last name",value:h,onChange:e=>{p(e.target.value),b(!0)},onKeyUp:J,size:"small"})}),(0,X.jsx)(w.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,X.jsx)(u.A,{label:"Truck Number",value:f||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(j(Number(e.target.value)),b(!0))},onKeyUp:J,size:"small"})}),(0,X.jsx)(x.A,{title:"Filter list",children:!v&&(h||f)||v&&!h&&v&&!f?(0,X.jsx)("span",{children:(0,X.jsx)(z.A,{onClick:P,children:(0,X.jsx)(K.A,{})})}):(0,X.jsx)("span",{children:(0,X.jsx)(z.A,{disabled:!h&&!f,onClick:I,children:(0,X.jsx)(q.A,{})})})}),(0,X.jsxs)(w.A,{sx:{p:1,display:"inline-flex"},children:[(0,X.jsx)(x.A,{title:"Create",children:(0,X.jsx)("span",{children:(0,X.jsx)(z.A,{onClick:()=>{c(!0)},children:(0,X.jsx)(L.A,{})})})}),(0,X.jsx)(x.A,{title:"Edit",children:(0,X.jsx)("span",{children:(0,X.jsx)(z.A,{disabled:1!==t.length,onClick:()=>{y("./edit/".concat(t[0]),{relative:"path",state:{from:k},replace:!1})},children:(0,X.jsx)(H.A,{})})})}),(0,X.jsx)(x.A,{title:"Delete",children:(0,X.jsx)("span",{children:(0,X.jsx)(z.A,{disabled:1!==t.length,onClick:()=>{S("".concat(t[0]))},children:(0,X.jsx)(W.A,{})})})})]}),(0,X.jsxs)(g.A,{onClose:()=>{c(!1)},open:o,children:[(0,X.jsx)(_.A,{children:"Select, what type of owner to create"}),(0,X.jsxs)(O.A,{sx:{pt:0},children:[(0,X.jsx)(R.Ay,{disableGutters:!0,children:(0,X.jsxs)(E.A,{onClick:()=>{y("../owners/create",{relative:"path",state:{from:k},replace:!1})},children:[(0,X.jsx)(m.A,{children:(0,X.jsx)(M.A,{children:(0,X.jsx)(B.A,{})})}),(0,X.jsx)(A.A,{primary:"Owner"})]})},"owner"),(0,X.jsx)(R.Ay,{disableGutters:!0,children:(0,X.jsxs)(E.A,{onClick:()=>{y("../ownersDrivers/create",{relative:"path",state:{from:k},replace:!1})},children:[(0,X.jsx)(m.A,{children:(0,X.jsx)(M.A,{children:(0,X.jsx)(B.A,{})})}),(0,X.jsx)(A.A,{primary:"Owner-Driver"})]})},"ownerDriver")]})]}),(0,X.jsx)(Q.A,{visible:N})]})}const ie=e=>{let{row:t,cell:n,setDialogData:r}=e;const i=n.getData(t),s=a.useRef(null);return(0,X.jsx)(ne,{ref:s,title:i.title,align:n.numeric?"right":"center",onClickCapture:e=>{if(!n.openInDialog)return;if(i.elementsCount&&i.elementsCount<2)return;const t=s.current;t&&function(e){let{clientWidth:t,clientHeight:n,scrollWidth:r,scrollHeight:a}=e;return a>n||r>t}(t)&&(e.preventDefault(),(0,Y.d)(e),r(i.data))},children:i.data},n.id)};function se(){const[e,t]=a.useState(void 0),[n,r]=a.useState("asc"),[s,l]=a.useState("fullName"),[c,d]=a.useState([]),[u,x]=a.useState(0),[p,m]=a.useState(15),[A,D]=a.useState({}),P=a.useRef(null),F=(0,i.zy)(),T=(0,i.Zp)(),M=(0,G.dh)(),{isLoading:O,isFetching:R,error:E,data:{items:_,total:z}={items:[],total:0}}=(0,o.I)({queryKey:["owners",u,p,s,n,A],queryFn:U.Dc,keepPreviousData:!0,retry:!1});a.useEffect((()=>{E&&M({severity:"error",message:E instanceof Error?E.message:JSON.stringify(E)})}),[E]);const L=_||[];a.useEffect((()=>{if(P.current){P.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[L]),a.useEffect((()=>{const e=[];c.forEach((t=>{L.find((e=>e.id===t))&&e.push(t)})),d(e)}),[L]);const H=()=>{t(void 0)};return(0,X.jsxs)(w.A,{sx:{width:"100%",height:"100%"},children:[(0,X.jsxs)(I.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,X.jsx)(ae,{selected:c,setQueryParams:e=>{D(e),x(0)}}),(0,X.jsx)(C.A,{ref:P,sx:{height:"calc(100% - 115px)"},children:(0,X.jsxs)(k.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,X.jsx)(re,{numSelected:c.length,order:n,orderBy:s,onSelectAllClick:e=>{if(e.target.checked){const e=L.map((e=>e.id));d(e)}else d([])},onRequestSort:(e,t)=>{const a=s===t&&"asc"===n;s===t&&"desc"===n?(r(void 0),l(void 0)):(r(a?"desc":"asc"),l(t))},rowCount:L.length}),(0,X.jsx)(y.A,{children:L.map(((e,n)=>{const r=(a="".concat(e.id),-1!==c.indexOf(a));var a;const i="enhanced-table-checkbox-".concat(n);return(0,X.jsxs)(N.A,{hover:!0,onDoubleClick:t=>{return n=e,void T("../".concat((0,V.Yn)(n),"/view/").concat(n.id),{relative:"path",state:{from:F},replace:!1});var n},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,X.jsx)(ne,{padding:"checkbox",children:(0,X.jsx)(h.A,{id:"".concat(i),color:"primary",checked:r,inputProps:{"aria-labelledby":i},onClick:t=>((e,t)=>{e.stopPropagation();const n=c.indexOf(t);let r=[];-1===n?r=r.concat(c,t):0===n?r=r.concat(c.slice(1)):n===c.length-1?r=r.concat(c.slice(0,-1)):n>0&&(r=r.concat(c.slice(0,n),c.slice(n+1))),d(r)})(t,"".concat(e.id))})}),ee.map((n=>(0,X.jsx)(ie,{row:e,cell:n,setDialogData:t},n.id)))]},e.id)}))})]})}),(0,X.jsx)(S.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:z,rowsPerPage:p,page:u,onPageChange:(e,t)=>{x(t)},onRowsPerPageChange:e=>{m(parseInt(e.target.value,10)),x(0)}})]}),(0,X.jsxs)(g.A,{open:!!e,TransitionComponent:$,keepMounted:!0,onClose:H,"aria-describedby":"alert-dialog-slide-description",children:[(0,X.jsx)(f.A,{children:(0,X.jsx)(j.A,{id:"dialog-content",sx:{span:{display:"grid"}},children:e})}),(0,X.jsx)(v.A,{children:(0,X.jsx)(b.A,{onClick:H,children:"Close"})})]}),(0,X.jsx)(Q.A,{visible:O||R})]})}},3768:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(9662),a=n(579);const i=(0,r.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3560:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(9662),a=n(579);const i=(0,r.A)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},8533:(e,t,n)=>{n.d(t,{A:()=>f});var r=n(45),a=n(9379),i=n(5043),s=n(8387),l=n(8610),o=n(1475),c=n(4535),d=n(8206),u=n(4496),h=n(2532),x=n(2372);function p(e){return(0,x.Ay)("MuiDialogContentText",e)}(0,h.A)("MuiDialogContentText",["root"]);var m=n(579);const A=["children","className"],g=(0,c.Ay)(u.A,{shouldForwardProp:e=>(0,o.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),f=i.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiDialogContentText"}),{children:i,className:o}=n,c=(0,r.A)(n,A),u=(e=>{const{classes:t}=e,n=(0,l.A)({root:["root"]},p,t);return(0,a.A)((0,a.A)({},t),n)})(c);return(0,m.jsx)(g,(0,a.A)((0,a.A)({component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:c,className:(0,s.A)(u.root,o)},n),{},{classes:u}))}))},6600:(e,t,n)=>{n.d(t,{A:()=>A});var r=n(9379),a=n(45),i=n(5043),s=n(8387),l=n(8610),o=n(4496),c=n(4535),d=n(8206),u=n(7034),h=n(2563),x=n(579);const p=["className","id"],m=(0,c.Ay)(o.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),A=i.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiDialogTitle"}),{className:o,id:c}=n,A=(0,a.A)(n,p),g=n,f=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},u.t,t)})(g),{titleId:j=c}=i.useContext(h.A);return(0,x.jsx)(m,(0,r.A)({component:"h2",className:(0,s.A)(f.root,o),ownerState:g,ref:t,variant:"h6",id:null!==c&&void 0!==c?c:j},A))}))},3851:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(9379),a=n(45),i=n(5043),s=n(8387),l=n(8610),o=n(1347),c=n(4535),d=n(8206),u=n(2532),h=n(2372);function x(e){return(0,h.Ay)("MuiListItemAvatar",e)}(0,u.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var p=n(579);const m=["className"],A=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),g=i.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:c}=n,u=(0,a.A)(n,m),h=i.useContext(o.A),g=(0,r.A)((0,r.A)({},n),{},{alignItems:h.alignItems}),f=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,l.A)(r,x,n)})(g);return(0,p.jsx)(A,(0,r.A)({className:(0,s.A)(f.root,c),ownerState:g,ref:t},u))}))}}]);
//# sourceMappingURL=7666.145f726d.chunk.js.map