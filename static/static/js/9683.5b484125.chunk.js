"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[9683],{9683:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(9379),r=n(5043),i=n(9781),c=n(2836),o=n(5604),s=n(4535),d=n(1546),l=n(1962),u=n(39),h=n(7353),p=n(1806),x=n(3460),m=n(9650),g=n(4882),b=n(9090),f=n(8076),j=n(8093),A=n(5263),v=n(4496),k=n(1596),y=n(524),w=n(8612),P=n(1079),S=n(4944),C=n(6431),F=n(7166),D=n(9904),E=n(579);const O=[{id:"state",orderField:"state",getData:e=>({data:"".concat(e.state)}),numeric:!1,disablePadding:!0,label:"Email\xa0State"},{id:"createdAt",orderField:"createdAt",getData:e=>{const t="".concat(e.createdAt?D.k.format(new Date(e.createdAt)):"");return{data:(0,E.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Created\xa0At"},{id:"updatedAt",orderField:"updatedAt",getData:e=>{const t="".concat(e.updatedAt?D.k.format(new Date(e.updatedAt)):"");return{data:(0,E.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Updated\xa0At"},{id:"from",getData:e=>{const t=e.from;return{data:(0,E.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"From"},{id:"subject",getData:e=>{const t=e.subject;return{data:(0,E.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Subject"},{id:"to",getData:e=>{const t=e.to&&e.to[0];if("Person"===(null===t||void 0===t?void 0:t.toType)){const e=t.to,n="".concat(e.fullName),a="".concat((0,C.Pw)(e)),r="./".concat((0,C.Yn)(e),"/view/").concat(e.id);return{data:(0,E.jsxs)("span",{children:[(0,E.jsx)("a",{href:r,target:"_blank",onClick:F.d,children:"".concat(n)}),(0,E.jsx)("br",{}),"".concat(a)]}),title:n+"\n"+a}}if("User"===(null===t||void 0===t?void 0:t.toType)){const e=t.to,n="".concat(e.fullName),a="".concat(e.userRole),r="./users/view/".concat(e.id);return{data:(0,E.jsxs)("span",{children:[(0,E.jsx)("a",{href:r,target:"_blank",onClick:F.d,children:"".concat(n)}),(0,E.jsx)("br",{}),"".concat(a)]}),title:n+"\n"+a}}return{data:""}},numeric:!1,disablePadding:!0,label:"First\xa0To"}],T=(0,s.Ay)(g.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),_=(0,s.Ay)(u.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function I(e){const{onSelectAllClick:t,order:n,orderBy:a,numSelected:r,rowCount:i,onRequestSort:c}=e;return(0,E.jsx)(T,{children:(0,E.jsxs)(f.A,{children:[(0,E.jsx)(_,{padding:"checkbox",children:(0,E.jsx)(l.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:r>0&&r<i,checked:i>0&&r===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),O.map((e=>{return(0,E.jsx)(_,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&n,children:(0,E.jsxs)(j.A,{active:e.orderField&&a===e.orderField,hideSortIcon:!e.orderField,direction:a===e.orderField?n:"asc",onClick:e.orderField?(t=e.orderField,e=>{c(e,t)}):()=>{},children:[e.label,e.orderField&&a===e.orderField?(0,E.jsx)(h.A,{component:"span",sx:y.A,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function R(e){const{selected:t}=e,n=(0,i.jE)(),r=(0,S.dh)(),{isLoading:o}=(0,c.n)(P.$l,{onSuccess:()=>{r({severity:"success",message:"Deleted"}),n.invalidateQueries(["email"])},onError:e=>{r({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}});return(0,E.jsxs)(A.A,{sx:(0,a.A)({overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1}},t.length>0&&{bgcolor:e=>(0,d.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}),children:[t.length>0?(0,E.jsxs)(v.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,E.jsx)(v.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Emails"}),(0,E.jsx)(h.A,{sx:{p:1,display:"inline-flex"}}),(0,E.jsx)(w.A,{visible:o})]})}function q(){const[e,t]=r.useState("desc"),[n,a]=r.useState("createdAt"),[i,c]=r.useState([]),[s,d]=r.useState(0),[u,g]=r.useState(15),[j,A]=r.useState({}),v=r.useRef(null),y=(0,S.dh)(),{isLoading:C,isFetching:F,error:D,data:{items:T,total:q}={items:[],total:0}}=(0,o.I)({queryKey:["emails",s,u,n,e,j],queryFn:P.au,keepPreviousData:!0,retry:!1});r.useEffect((()=>{D&&y({severity:"error",message:D instanceof Error?D.message:JSON.stringify(D)})}),[D]);const N=T||[];r.useEffect((()=>{if(v.current){v.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[N]),r.useEffect((()=>{const e=[];i.forEach((t=>{N.find((e=>e.id===t))&&e.push(t)})),c(e)}),[N]);return(0,E.jsxs)(h.A,{sx:{width:"100%",height:"100%"},children:[(0,E.jsxs)(k.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,E.jsx)(R,{selected:i,setQueryParams:e=>{A(e),d(0)}}),(0,E.jsx)(m.A,{ref:v,sx:{height:"calc(100% - 115px)"},children:(0,E.jsxs)(p.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,E.jsx)(I,{numSelected:i.length,order:e,orderBy:n,onSelectAllClick:e=>{if(e.target.checked){const e=N.map((e=>e.id));c(e)}else c([])},onRequestSort:(r,i)=>{const c=n===i&&"asc"===e;n===i&&"desc"===e?(t(void 0),a(void 0)):(t(c?"desc":"asc"),a(i))},rowCount:N.length}),(0,E.jsx)(x.A,{children:N.map(((e,t)=>{const n=(a="".concat(e.id),-1!==i.indexOf(a));var a;const r="enhanced-table-checkbox-".concat(t);return(0,E.jsxs)(f.A,{hover:!0,onDoubleClick:()=>{},role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,sx:{cursor:"pointer"},children:[(0,E.jsx)(_,{padding:"checkbox",children:(0,E.jsx)(l.A,{id:"".concat(r),color:"primary",checked:n,inputProps:{"aria-labelledby":r},onClick:t=>((e,t)=>{e.stopPropagation();const n=i.indexOf(t);let a=[];-1===n?a=a.concat(i,t):0===n?a=a.concat(i.slice(1)):n===i.length-1?a=a.concat(i.slice(0,-1)):n>0&&(a=a.concat(i.slice(0,n),i.slice(n+1))),c(a)})(t,"".concat(e.id))})}),O.map((t=>{const n=t.getData(e);return(0,E.jsx)(_,{title:n.title,align:t.numeric?"right":"center",children:n.data},t.id)}))]},e.id)}))})]})}),(0,E.jsx)(b.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:q,rowsPerPage:u,page:s,onPageChange:(e,t)=>{d(t)},onRowsPerPageChange:e=>{g(parseInt(e.target.value,10)),d(0)}})]}),(0,E.jsx)(w.A,{visible:C||F})]})}},9904:(e,t,n)=>{n.d(t,{k:()=>a});const a=Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0})}}]);
//# sourceMappingURL=9683.5b484125.chunk.js.map