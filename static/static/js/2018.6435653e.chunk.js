"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[2018],{2018:(e,r,i)=>{i.r(r),i.d(r,{default:()=>C});var t=i(9379),o=i(5043),s=i(9781),d=i(5604),a=i(2836),n=i(3892),l=i(899),u=i(7353),c=i(1906),m=i(9336),f=i(1403),p=i(6216),q=i(9893),y=i(4361),h=i(3189),g=i(1079),b=i(4944),k=i(8833),j=i(6431),x=i(579);const v=l.Ik({type:l.Yj().oneOf([k.P7.FCFS,k.P7.ASAP,k.P7.APPT]).required("Type is required"),at:l.p6().when(["type"],((e,r)=>e[0]===k.P7.FCFS?r.oneOf([void 0]):r.required("At is required"))),from:l.p6().when(["type"],((e,r)=>e[0]!==k.P7.FCFS?r.oneOf([void 0]):r.required("From is required"))),to:l.p6().when(["type"],((e,r)=>e[0]!==k.P7.FCFS?r.oneOf([void 0]):r.required("To is required")))}),A=l.Ik({type:l.Yj().oneOf([k.P7.FCFS,k.P7.Direct,k.P7.APPT]).required("Type is required"),at:l.p6().when(["type"],((e,r)=>e[0]===k.P7.FCFS?r.oneOf([void 0]):r.required("At is required"))),from:l.p6().when(["type"],((e,r)=>e[0]!==k.P7.FCFS?r.oneOf([void 0]):r.required("From is required"))),to:l.p6().when(["type"],((e,r)=>e[0]!==k.P7.FCFS?r.oneOf([void 0]):r.required("To is required")))}),S=l.Ik({pieces:l.ai().integer().min(1).required("Pieces must be at least 1"),unitOfWeight:l.Yj().oneOf(k.Lv).required("Unit of weight is required"),weight:l.ai().moreThan(0).required("Weight is required"),unitOfLength:l.Yj().oneOf(k.Ny).required("Unit of length is required"),length:l.ai().moreThan(0).required("Length is required")}),T=l.Ik({bol:l.Yj().required("Bol is required"),pieces:l.ai().integer().min(1).required("Pieces must be at least 1"),unitOfWeight:l.Yj().oneOf(k.Lv).required("Unit of weight is required"),weight:l.ai().moreThan(0).required("Weight is required"),seal:l.Yj().required("Seal is required"),addressIsCorrect:l.zM().required("Address Is Correct is required")}),I=l.Ik({bol:l.Yj().required("Bol is required"),signedBy:l.Yj().required("Signed By is required")}),F=l.Ik({status:l.Yj().oneOf(k.h9).required("Stop Pick Up Status is required"),facility:l.Ik({id:l.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:v.required("Time frame is required"),freightList:l.YO().of(S.required("Freight is required")).required("Stop pickup must contain al least one freight"),driversInfo:l.YO().of(T.required("Stop PickUp Drivers Info is required")).optional(),addInfo:l.Yj()}),Y=l.Ik({status:l.Yj().oneOf(k.$W).required("Stop Delivery Status is required"),facility:l.Ik({id:l.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:A.required("Time frame is required"),driversInfo:l.YO().of(I.required("Stop Delivery Drivers Info is required")).optional(),bolList:l.YO().of(l.Yj().required("Bol Id must not be empty")).min(1,"Must be at least one Freight in Freight List").required("Must be at least one Freight in Freight List"),addInfo:l.Yj()}),L=l.Ik({status:l.Yj().oneOf(k.Jf).required("Status is required"),ref:l.YO().of(l.Yj().required("Ref must not be empty")).min(1,"REF is required").max(3,"REF must contain not more then 3 items").required("REF is required"),stops:l.YO().of(l.RZ((e=>{switch(e.type){case k.lk.PickUp:return F.required("Stop pickup is required");case k.lk.Delivery:return Y.required("Stop delivery is required");default:return l.gl().oneOf([void 0]).required('Type of stop must be "Pick Up" or "Delivery"')}}))).min(2).required("Stops are required"),weight:l.Yj().required("Weight is required"),truckType:l.YO(l.Yj().oneOf(k.Ju)).min(1,"Select at list one").required("Truck Type is required"),rate:l.ai().typeError("Rate must be a number"),totalCharges:l.ai().typeError("Total charges must be a number").required("Total charges is required"),currency:l.Yj().required("Currency is required"),bookedByUser:l.Ik({id:l.Yj().required()}).required("Booked by is required"),bookedByCompany:l.Yj(),assignTo:l.YO(l.Ik({id:l.Yj().required()}).typeError("Enter correct user")).min(1,"Assign To is required").required("Assign To is required"),checkInAs:l.Yj(),truck:l.Ik({id:l.Yj().required()}).typeError("Enter correct truck").nullable(),bookedWith:l.Ik({id:l.Yj().required()}).typeError("Enter correct customer").required("Booked with is required")}),w={id:"",status:"Available",ref:[],stops:[],weight:void 0,truckType:[],rate:void 0,totalCharges:void 0,currency:"USD",bookedByUser:null,bookedByCompany:void 0,assignTo:[],checkInAs:"4ULogistics",truck:null,bookedWith:null};function C(e){let{id:r,onClose:i}=e;const[l,v]=o.useState(w),A=(0,s.jE)(),S=(0,b.dh)(),{isLoading:T,isFetching:I,error:F,data:Y}=(0,d.I)({queryKey:["load",r],queryFn:g.bQ,retry:!1});o.useEffect((()=>{F&&S({severity:"error",message:F instanceof Error?F.message:JSON.stringify(F)})}),[F]);const{mutate:C,isLoading:O}=(0,a.n)(g.QD,{onSuccess:e=>{S({severity:"success",message:"Saved"}),A.invalidateQueries(["load",r]),A.invalidateQueries(["loads"]),i("Save",e)},onError:e=>{S({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),N=(0,n.Wx)({initialValues:l,enableReinitialize:!0,validationSchema:L,onSubmit:e=>{C(e)}});o.useEffect((()=>{v((0,t.A)((0,t.A)({},l),(0,j.jv)(Y,Object.keys(l))))}),[Y]);return(0,x.jsxs)(u.A,{sx:{height:"100%"},children:[(0,x.jsx)("form",{onSubmit:N.handleSubmit,onReset:N.handleReset,style:{height:"100%"},children:(0,x.jsxs)(u.A,{sx:{p:3,height:"100%"},children:[(0,x.jsx)(m.A,{}),(0,x.jsxs)(u.A,{sx:{maxHeight:"calc(100% - 70px)",overflowX:"hidden",overflowY:"scroll"},children:[(0,x.jsxs)(u.A,{sx:{marginBottom:-1,p:1},children:[(0,x.jsx)(h.zM,{fieldName:"status",label:"Status",items:k.Jf,formik:N}),(0,x.jsx)(h.A_,{fieldName:"ref",label:"REF",multiline:!0,maxRows:3,formik:N}),(0,x.jsx)(y.A,{fieldName:"stops",formik:N})]},"topControls"),(0,x.jsxs)(u.A,{sx:{display:"inline-flex",width:"100%"},children:[(0,x.jsxs)(u.A,{sx:{p:1,width:"50%"},children:[(0,x.jsx)(h.A_,{fieldName:"weight",label:"Weight",formik:N}),(0,x.jsx)(h.yJ,{fieldName:"truckType",label:"Truck Type",items:k.Ju,formik:N}),(0,x.jsx)(h.Lw,{fieldName:"bookedByUser",label:"Booked By",getSelectedLabel:e=>"".concat(e.fullName),getItemLabel:e=>"".concat(e.fullName),getItemSecondLabel:e=>"".concat(e.jobTitle),ListIcon:q.A,entityType:"User",queryFn:g.Fw,orderby:"fullName",order:"asc",formik:N}),(0,x.jsx)(h.Lw,{fieldName:"bookedWith",label:"Booked With",getSelectedLabel:e=>"".concat(e.name),getItemLabel:e=>"".concat(e.name),getItemSecondLabel:e=>"".concat(e.type),ListIcon:p.A,entityType:"Customer",queryFn:g.sg,orderby:"name",order:"asc",formik:N}),(0,x.jsx)(h.Lw,{fieldName:"truck",label:"Truck",getSelectedLabel:e=>"".concat(e.truckNumber),getItemLabel:e=>"".concat(e.truckNumber),getItemSecondLabel:e=>"".concat(e.status,", ").concat(e.licencePlate),ListIcon:f.A,entityType:"Truck",queryFn:g.fG,orderby:"truckNumber",order:"asc",formik:N})]},"left"),(0,x.jsxs)(u.A,{sx:{p:1,width:"50%"},children:[(0,x.jsx)(h.A_,{fieldName:"rate",label:"Drivers Rate",placeholder:"Enter drivers rate",number:!0,formik:N}),(0,x.jsx)(h.A_,{fieldName:"totalCharges",label:"Total Rate",placeholder:"Enter total rate",number:!0,formik:N}),(0,x.jsx)(h.A_,{fieldName:"currency",label:"Currency",formik:N}),(0,x.jsx)(h.A_,{fieldName:"checkInAs",label:"Check In As",formik:N}),(0,x.jsx)(h.A_,{fieldName:"bookedByCompany",label:"Booked By Company",formik:N})]},"right")]},"centerControls"),(0,x.jsxs)(u.A,{sx:{p:1,paddingBottom:0,paddingTop:0},children:[(0,x.jsx)(h.YY,{fieldName:"assignTo",label:"Assign To",getSelectedLabel:e=>"".concat(e.fullName),getItemLabel:e=>"".concat(e.fullName),getItemSecondLabel:e=>"".concat(e.jobTitle),ListIcon:q.A,queryFn:g.Fw,orderby:"fullName",order:"asc",formik:N}),(0,x.jsx)(u.A,{sx:{paddingBottom:2,paddingTop:2}},"spacerRate"),(0,x.jsx)(h.$c,{objectId:null===Y||void 0===Y?void 0:Y.id,objectType:"Load",label:"Rate Files",tags:{["".concat(null===Y||void 0===Y?void 0:Y.id)]:"Rate"}}),(0,x.jsx)(u.A,{sx:{paddingBottom:2,paddingTop:2}},"spacerBill"),(0,x.jsx)(h.$c,{objectId:null===Y||void 0===Y?void 0:Y.id,objectType:"Load",label:"Bill Files",tags:{["".concat(null===Y||void 0===Y?void 0:Y.id)]:"Bill"}})]},"bottomControls")]},"controls"),(0,x.jsx)(m.A,{}),(0,x.jsxs)(u.A,{sx:{paddingTop:3,display:"flex"},children:[(0,x.jsx)(u.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,x.jsx)(c.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"submit",disabled:!N.dirty,children:"Save"})},"left"),(0,x.jsx)(u.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,x.jsx)(c.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"button",onClick:()=>{i("Close")},children:"Cancel"})},"right")]},"buttons")]})}),(0,x.jsx)(h.aH,{visible:O||T||I})]})}}}]);
//# sourceMappingURL=2018.6435653e.chunk.js.map